<%- include ('partials/header.ejs', {titulo: titulo, usuario: usuario, login: login, sesion: sesion}) -%>

<div class="justify-content-center align-items-center h-100">
  <% const meses = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio",
  "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"]; %>

  <h2 class="fw-bold mb-2 menuPrincipalTitulo" style="text-align: center">
      Reporte de Ventas <%= meses[new Date ().getMonth ()] %> <%= new Date ().getFullYear () %>
  </h2>
  <div class="row tablaResumen" style="text-align: center;">
      <div class="col">
          <table class="table table-dark">
              <thead>
                  <tr>
                      <th scope="col">ID de Venta</th>
                      <th scope="col">Fecha</th>
                      <th scope="col">Productos Vendidos</th>
                      <th scope="col">Total de la Venta</th>
                  </tr>
              </thead>
              <tbody>
                <% mesActual = new Date ().getMonth () + 1 %>
                <% resultados.forEach ((element) => { %>
                      <% mes = parseInt (element.fecha[5] + element.fecha[6])%>
                      <% if (mes === mesActual) { %>
                        <tr class="table-secondary">
                            <th scope="row"><%= element.id_venta %> </th> 
                            <td><%= element.fecha %> </td> 
                            <td><%= element.cantidadProductos %> </td> 
                            <td>$<%= element.total %> </td>
                            <% totalMes += element.total %>
                        </tr>
                      <% } %>
                  <% }); %> 
                    <tr class="table-secondary">
                      <th scope="row"></th> 
                      <td></td> 
                      <td style="font-weight: bold;">Total Vendido en el Mes</td>
                      <% totalMes = totalMes.toFixed (2) %>
                      <td style="font-weight: bold;">$<%= totalMes %></td>
                    </tr>
                </tbody>
          </table>
      </div> 
  </div>   

  <div class="row" style="text-align: center; padding-top: 30px;">
      <div class="col">
          <form action="/reporteVentas" method="post">
              <button type="submit" class="btn btn-dark">Regresar al Menú</button>
          </form>
      </div>
  </div>
</div>

<%- include ('partials/footer.ejs') -%> 

<!-- <html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Reporte de ventas mensual</title>
    <link href="tablas.css" rel="stylesheet" type="text/css">
    <style>
    </style>
  </head>
  <body> -->
    <!-- <h1>Reporte de ventas</h1>

      <table>
        <caption>Mes</caption>
          <tr>
            <th>Semana</th>
            <th>Ganancia de membresias</th>
            <th>Ganancia de productos</th>
            <th>Compra de productos</th>
            <th>Sueldo de empleados (€)</th>
            <th>Mantenimiento</th>
            <th>Balance de ingresos y egresos</th>
            
          </tr>
          <tr>
            <td>1</td>
            <td>118</td>
            <td>12/09</td>
            <td>Great idea</td>
            <td>30</td>
            <td>30</td>
            <td>30</td>
          </tr>
          <tr>
            <td>2</td>
            <td>Hairdresser</td>
            <td>12/09</td>
            <td>Great idea</td>
            <td>30</td>
            <td>30</td>
            <td>30</td>
          </tr>
          <tr>
            <td>3</td>
            <td>Restaurant</td>
            <td>12/09</td>
            <td>Regrets</td>
            <td>18</td>
            <td>30</td>
            <td>30</td>
          </tr>
          <tr>
            <td>4</td>
            <td>Shoeshop</td>
            <td>13/09</td>
            <td>Big regrets</td>
            <td>65</td>
            <td>30</td>
            <td>30</td>
          </tr>

    </table> -->

  <!-- </body>
</html> -->
